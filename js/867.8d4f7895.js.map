{"version":3,"file":"js/867.8d4f7895.js","mappings":"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","sources":["webpack://vue-event/./src/views/article/article.vue","webpack://vue-event/src/views/article/article.vue","webpack://vue-event/./src/views/article/article.vue?4e28","webpack://vue-event/./src/views/article/article.vue?a159"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-card',{staticClass:\"box-card\"},[_c('div',{staticClass:\"clearfix header-box\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"文章分类\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.addListFN}},[_vm._v(\"添加分类\")])],1),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.cateList,\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"label\":\"序号\",\"type\":\"index\",\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"label\":\"分类名称\",\"prop\":\"cate_name\"}}),_c('el-table-column',{attrs:{\"label\":\"分类别名\",\"prop\":\"cate_alias\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.updateFn(scope.row)}}},[_vm._v(\"修改\")]),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.delCateFn(scope.row)}}},[_vm._v(\"删除\")])]}}])})],1),_c('el-dialog',{attrs:{\"title\":\"添加文章\",\"visible\":_vm.dialogFormVisible},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event},\"closed\":_vm.dislogClosedFn}},[_c('el-form',{ref:\"dislogRef\",attrs:{\"model\":_vm.dislogFrom,\"rules\":_vm.dislogRules,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"prop\":\"Category\",\"label\":\"分类名称\"}},[_c('el-input',{model:{value:(_vm.dislogFrom.cate_name),callback:function ($$v) {_vm.$set(_vm.dislogFrom, \"cate_name\", $$v)},expression:\"dislogFrom.cate_name\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"Classification\",\"label\":\"分类别名\"}},[_c('el-input',{model:{value:(_vm.dislogFrom.cate_alias),callback:function ($$v) {_vm.$set(_vm.dislogFrom, \"cate_alias\", $$v)},expression:\"dislogFrom.cate_alias\"}})],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.cancelFn}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.confirmFn}},[_vm._v(\"确 定\")])],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- 卡片头部 -->\r\n    <el-card class=\"box-card\">\r\n      <div slot=\"header\" class=\"clearfix header-box\">\r\n        <span>文章分类</span>\r\n        <el-button type=\"primary\" size=\"mini\" @click=\"addListFN\">添加分类</el-button>\r\n      </div>\r\n      <!-- 文章的分类 -->\r\n      <el-table style=\"width: 100%\" :data=\"cateList\" border stripe>\r\n        <el-table-column label=\"序号\" type=\"index\" width=\"100\"></el-table-column>\r\n        <el-table-column label=\"分类名称\" prop=\"cate_name\"></el-table-column>\r\n        <el-table-column label=\"分类别名\" prop=\"cate_alias\"></el-table-column>\r\n        <el-table-column label=\"操作\">\r\n          <!-- scope对象: {row:行对象 } v-slot作用域插槽 用来获取插槽信息和绑定插槽里面的数据 -->\r\n          <template v-slot=\"scope\">\r\n            <el-button type=\"primary\" size=\"mini\" @click=\"updateFn(scope.row)\">修改</el-button>\r\n            <el-button type=\"danger\" size=\"mini\" @click=\"delCateFn(scope.row)\">删除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <!-- 添加的对话框 -->\r\n      <!-- el-dialog 对话框组件 title: 左上角标题 visible: 控制对话框是否显示 (右侧Vue变量为true显示,为false就隐藏)\r\n      扩展知识点: .sync是Vue2.3版本新增\r\n      官方文档: https://cn.vuejs.org/v2/guide/components-custom-events.html#sync\r\n      .sync类似 v-mode 可以给子组件实现双向绑定数据\r\n      复习: v-model如何给子组件实现双向数据绑定(父Vue变量要传给子组件 子组件传出的值也要自动绑定到父Vue变量)\r\n      v-model本质:给所在标签绑定:value=\"Vue变量\"  @input=\"val => Vue变量 =val\"\r\n      <标签 v-model=\"Vue变量\"></标签>\r\n      运行时如下\r\n      <标签 :value=\"Vue变量\" @input=\"val =>Vue变量 = val\"></标签>\r\n      -->\r\n      <el-dialog title=\"添加文章\" :visible.sync=\"dialogFormVisible\" @closed=\"dislogClosedFn\">\r\n        <el-form ref=\"dislogRef\" :model=\"dislogFrom\" :rules=\"dislogRules\" label-width=\"80px\">\r\n          <el-form-item prop=\"Category\" label=\"分类名称\">\r\n            <el-input v-model=\"dislogFrom.cate_name\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item prop=\"Classification\" label=\"分类别名\">\r\n            <el-input v-model=\"dislogFrom.cate_alias\"></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"cancelFn\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"confirmFn\">确 定</el-button>\r\n        </div>\r\n      </el-dialog>\r\n    </el-card>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// 分享的经验:如果用同一个按钮 想要做状态区分\r\n// 1.定义一个标记变量isEdit(true为编辑,false新增)  还要定义本次要编辑的数据唯一id值  editId\r\n// 2.在点击修改的时候 isEdit改为true,editId保持要修改的数据id\r\n// 3.在点击新增按钮的时候 isEdit改为false editId置空\r\n// 4.在点击保存按钮时(确定按钮时) 可以使用isEdit变量做区分\r\nimport { getArtCateListAPI, saveArtCateAPI, updateArtCateAPI, delArtCateAPI } from '@/api'\r\nexport default {\r\n  name: 'ArtCate',\r\n  data() {\r\n    return {\r\n      cateList: [], // 文章分类数组\r\n      dialogFormVisible: false,\r\n      dislogFrom: {\r\n        cate_name: '',\r\n        cate_alias: ''\r\n      },\r\n      dislogRules: {\r\n        cate_name: [\r\n          { required: true, message: '请输入分类名称', trigger: 'blur' },\r\n          { pattern: /^\\S{1,10}$/, message: '请输入1-10非空字符', trigger: 'blur' }\r\n        ],\r\n        cate_alias: [\r\n          { required: true, message: '请输入分类别名', trigger: 'blur' },\r\n          { pattern: /^[a-zA-Z0-9]{1,15}$/, message: '分类别名必须是1-15位的字母数字', trigger: 'blur' }\r\n        ]\r\n      },\r\n      // isEdit用来判断时修改点的还是 新增点的\r\n      isEdit: false,\r\n      editId: ''\r\n    }\r\n  },\r\n  created() {\r\n    // 获取文章分类列表\r\n    this.getArtCateFN()\r\n  },\r\n  methods: {\r\n    // 获取文章分类列表\r\n    async getArtCateFN() {\r\n      const { data: res } = await getArtCateListAPI()\r\n      // console.log(res)\r\n      this.cateList = res.data\r\n      // console.log(this.cateList)\r\n    },\r\n    // 点击添加对话框显示\r\n    addListFN() {\r\n      this.dialogFormVisible = true\r\n    },\r\n    // 对话框关闭时 内容清空\r\n    dislogClosedFn() {\r\n      this.$refs.dislogRef.resetFields()\r\n    },\r\n    // 点击取消清除对话框里面的内容\r\n    cancelFn() {\r\n      this.dialogFormVisible = false\r\n    },\r\n    // 点击确定 清除对话框里面的内容\r\n    confirmFn() {\r\n      this.$refs.dislogRef.validate(async valid => {\r\n        if (valid) {\r\n          // 通过校验\r\n          if (this.isEdit) {\r\n            // 要修改\r\n            // this.dislogFrom.id = this.editId\r\n            // updateArtCateAPI(this.dislogFrom)\r\n            const { data: res } = await updateArtCateAPI({ id: this.editId, ...this.dislogFrom })\r\n            if (res.code !== 0) return this.$message.error('上传失败')\r\n            this.$message.success('上传成功')\r\n            // console.log(res)\r\n          } else {\r\n            // 要新增\r\n            this.editId = ''\r\n            const { data: res } = await saveArtCateAPI(this.dislogFrom)\r\n            // console.log(res)\r\n            if (res.code !== 0) return this.$message.error('上传失败')\r\n            this.$message.success('上传成功')\r\n            // 再重新请求一次文章列表 拿到最新数据 让表格更新\r\n            // 声明周期的方法比如 created 不会挂载到this身上  无法this.created\r\n          }\r\n          this.dialogFormVisible = false\r\n          this.getArtCateFN()\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n      this.getArtCateFN()\r\n    },\r\n    // 修改文章别名，名称数据\r\n    updateFn(obj) {\r\n      this.isEdit = true\r\n      this.editId = obj.id\r\n      // obj的值:{id:文章分类id,cate_name:文章分类名字,cate_alias:文章分类别名}\r\n      this.dialogFormVisible = true\r\n      // 让里面的代码异步执行 先走初始化对话框\r\n      this.$nextTick(() => {\r\n        // 数据回显\r\n        this.dislogFrom.cate_name = obj.cate_name\r\n        this.dislogFrom.cate_alias = obj.cate_alias\r\n      })\r\n    },\r\n    // 删除文章分类内容\r\n    async delCateFn(obj) {\r\n      const { data: res } = await delArtCateAPI(obj.id)\r\n      if (res.code !== 0) return this.$message.error(res.message)\r\n      this.$message.success(res.message)\r\n      // 删除后 在调用方法去后台获取最新的数据列表\r\n      this.getArtCateFN()\r\n    }\r\n  }\r\n}\r\n// 小bug: (el-form和el-dialog和数据回显 同时用 有bug)\r\n// 复现:第一次打开网页 先点击修改 再点击新增 发现输入框竟然有值\r\n// 原因: 点击修改后 关闭对话框的时候 置空失效了\r\n// 具体分析: 主人公resetFields有问题\r\n// 线索: Dialog的内容时懒渲染的，即在第一次被打开之之前 传入的默认slot不会被渲染到DOM上\r\n// 线索:vue数据改变(先执行同步所有) 再去更新DOM(异步代码)\r\n// 无问题:第一次打开网页 先点击新增 ->dialog出现 ->el-form组件第一次挂载 (关联的addForm对象的属性的值为空字符串) el-form组件内绑定了初始值 所以后续调用resetFields的时候它可以用到空字符串初始值来重置\r\n\r\n// 有问题: 第一次打开网页 先点击修改按钮 ->虽然dialog变量为true了但是同步代码把addForm对象里赋值了(默认值) ->DOM更新异步 ->dialog出现 ->el-form组件第一次挂载(使用addForm内置做回显然后第一次el-form内绑定了初始值(有值))  以后做重置 它就用绑定的初始值的做重置\r\n\r\n// 解决让 el-dialog第一次挂载到el-form时 先用addForm空字符串初始值绑定到内部 后续用做resetFields重置\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.header-box {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./article.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./article.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./article.vue?vue&type=template&id=4af7c36e&scoped=true&\"\nimport script from \"./article.vue?vue&type=script&lang=js&\"\nexport * from \"./article.vue?vue&type=script&lang=js&\"\nimport style0 from \"./article.vue?vue&type=style&index=0&id=4af7c36e&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4af7c36e\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","slot","_v","on","addListFN","staticStyle","cateList","scopedSlots","_u","key","fn","scope","$event","updateFn","row","delCateFn","dialogFormVisible","dislogClosedFn","ref","dislogFrom","dislogRules","model","value","cate_name","callback","$$v","$set","expression","cate_alias","cancelFn","confirmFn","staticRenderFns","name","data","required","message","trigger","pattern","isEdit","editId","created","methods","id","component"],"sourceRoot":""}